// ============================================
// PRISMA SCHEMA UPDATES FOR NOTIFICATIONS
// ============================================
// Add these to your existing schema.prisma file

// 1. Add this enum at the top level (with your other enums)
enum NotificationType {
  MESSAGE
  MATCH
}

// 2. Update your existing User model - add this field:
model User {
  // ... your existing User fields ...

  // Notification settings
  emailNotificationsEnabled Boolean @default(false)

  // Relations
  notifications Notification[]

  // ... rest of your User model ...
}

// 3. Add this new Notification model
model Notification {
  id        String           @id @default(cuid())
  userId    String
  type      NotificationType
  data      Json             // Flexible storage for notification details
  isRead    Boolean          @default(false)
  createdAt DateTime         @default(now())

  // Relations
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  // Indexes for performance
  @@index([userId, isRead])
  @@index([userId, createdAt])
}

// ============================================
// MIGRATION INSTRUCTIONS
// ============================================
// After updating your schema.prisma file:
// 1. Run: npx prisma migrate dev --name add_notifications
// 2. Run: npx prisma generate
//
// This will:
// - Create the Notification table
// - Add the NotificationType enum
// - Add emailNotificationsEnabled to User
// - Generate updated Prisma client types
